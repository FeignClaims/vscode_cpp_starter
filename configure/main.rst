************************************************************************************************************************
2.配置
************************************************************************************************************************

========================================================================================================================
下载并解压
========================================================================================================================

- `配置文件`_

**记得解压缩! 记得解压缩! 记得解压缩!**

- Windows: :KBD:`右键` 该文件, 然后选择 :menuselection:`提取` 以提取文件.
- MacOS: :KBD:`双击` 该文件以提取文件.

.. note::

  - 这里写的都是系统内置的解压缩方法, 如果有其他压缩软件请随意.
  - 解压在全英路径, 且文件夹名不要有奇怪的标点符号乃至空格!
  - 不要图省事解压到桌面, 以免因用户名过于奇怪而出错! —— **来自提问者的真实经历!**

========================================================================================================================
打开文件夹
========================================================================================================================

打开 VSCode, 将解压得到的 cpp_novice 文件夹拖动到 VSCode 中.

.. note::

  - 解压时, 有可能最终得到一个 cpp_novice 文件夹其中又包含一个 cpp_novice 文件夹的情况; 如果出现这种情况, 应该拖动的是内层的 cpp_novice 文件夹.
  - 拖动到右侧区域而非左边的侧边栏.
  - 不要自作主张用左上角菜单栏打开, 因为该菜单下有两个对应操作, 很容易犯错.

在弹出的界面中选择 :menuselection:`是，我信任此作者(Yes, I trust the authros)`.

.. figure:: VSCode_安全性.png

  安全性提示

========================================================================================================================
导入配置文件
========================================================================================================================

.. note::

  2024-09 更新的 VSCode 1.93 更改了配置文件界面, 如果你使用的是老版本, 请点击窗口左下角的 :menuselection:`齿轮`, 点击 :menuselection:`配置文件(Profiles)` 来更新你的 VSCode.

点击窗口左下角的 :menuselection:`齿轮`, 点击 :menuselection:`配置文件(Profiles)`.

.. note::

  如果窗口左下角没有齿轮, 请尝试通过 :KBD:`Ctrl` + :KBD:`Shift` + :KBD:`P` 或 :KBD:`Command⌘` + :KBD:`Shift` + :KBD:`P` 打开命令菜单, 输入 ``toggle activity bar`` 以找到 :menuselection:`查看：切换活动栏可见性(View: Toggle Activity Bar Visibility)`, :KBD:`回车`.

在弹出的窗口中, 点击蓝色按钮右边的下三角下拉按钮, 选择 :menuselection:`导入配置文件...(Import Profile...)`.

.. figure:: VSCode_导入配置文件.png

  导入配置文件

然后, 在弹出的新窗口中, 点击 :menuselection:`选择文件...`, 然后选择你解压的 ``cpp_novice`` 目录下的 ``cpp_novice.code-profile``.

然后在窗口中点击 :menuselection:`创建` 来完成该配置文件的导入.

.. figure:: VSCode_确定创建导入的配置文件.png

  确定创建导入的配置文件

========================================================================================================================
切换至配置文件
========================================================================================================================

点击窗口左下角的 :menuselection:`齿轮`, 选择 :menuseolection:`配置文件(Profiles)`.

在弹出的窗口中, 点击 cpp_novice 旁的 :menuselection:`对勾符号✓` 从而切换为使用 cpp_novice 配置文件. 此外, 你还能点击 cpp_novice, 然后在右侧选择让它作为默认配置.

.. figure:: VSCode_切换配置文件.png

  切换配置文件

.. note::

  此时齿轮旁显示 ``CP``, 表明确实加载该配置文件; 以后在使用中也请注意切换.

========================================================================================================================
WSL 专属步骤: 用 WSL 打开该文件夹
========================================================================================================================

.. danger::

  VSCode 远程窗口 (例如 WSL) 专属步骤, 其他配置方案请忽略这一部分.

:KBD:`Ctrl` + :KBD:`Shift` + :KBD:`P` 打开命令菜单, 输入 ``wsl open`` 以找到 :menuselection:`WSL: 在 WSL 中打开文件夹...`, :KBD:`回车`, 并选择该 cpp_novice 文件夹.

.. figure:: WSL_打开文件夹.png

  在 WSL 中打开文件夹

在左边侧边栏找到 :menuselection:`扩展(Extensions)`.

可以发现, 部分扩展需要我们在远程窗口手动安装, 为此我们点击下方 ``WSL:UBUNTU - 已安装`` 旁的 :menuselection:`云状图标`, 在弹出的窗口中全选从而下载.

.. figure:: 为远程窗口安装扩展.png

  为远程窗口安装扩展

========================================================================================================================
为 CMake 选择编译器
========================================================================================================================

重新启动 VSCode,

:KBD:`Ctrl` + :KBD:`Shift` + :KBD:`P` 或 :KBD:`Command⌘` + :KBD:`Shift` + :KBD:`P` 打开命令菜单, 输入 ``cmake kit`` 以找到 :menuselection:`CMake: 扫描工具包`, :KBD:`回车`.

:KBD:`Ctrl` + :KBD:`Shift` + :KBD:`P` 或 :KBD:`Command⌘` + :KBD:`Shift` + :KBD:`P` 打开命令菜单, 输入 ``cmake configure`` 以找到 :menuselection:`CMake: 配置`, :KBD:`回车`.

之后会弹出如下图选项:

- Windows WSL: 选择 Clang 即可, 请注意选择 **/home/linuxbrew** 下的版本.
- Windows MSYS2: 选择 Clang 即可, 请注意选择 **msys2 安装路径** (默认为 ``C:\msys64``) 下的版本.
- MacOS: 系统自带有 Clang 编译器, 请注意选择 **homebrew** 路径下的版本.

.. tabs::

  .. tab:: Windows WSL 选择编译器

    .. figure:: WSL_选择编译器.png

  .. tab:: MacOS 选择编译器

    .. figure:: MacOS_选择编译器.png

.. note::

  2023-04-27 左右, VSCode CMake Tools 有更新, 这一步运行时可能卡在 ``[main] Configuring project: cpp_novice``. 请尝试重新启动 VSCode 或多次执行 :menuselection:`CMake: 配置`.

========================================================================================================================
配置完成
========================================================================================================================

打开 test 文件夹下的 main.cpp, 通过 :KBD:`Ctrl` + :KBD:`Shift` + :KBD:`P` 或 :KBD:`Command⌘` + :KBD:`Shift` + :KBD:`P` 打开命令菜单, 输入 ``clangdr`` 以找到 :menuselection:`clangd: Restart language server`, 从而刷新配置.

.. note::

  当你的 C++ 源代码莫名其妙显示错误信息时, 通过该步骤可能得到解决.

.. figure:: VSCode_刷新_clangd.png

  刷新 Clangd

你可以直接将这个 ``cpp_novice`` 文件夹作为学习 C++ 所用的文件夹, 将代码放入 ``src`` 子文件夹中.

运行和调试代码的方法见下文.

.. note::

  如果需要在其他文件夹中应用配置，请看 :doc:`/appendix/explain`

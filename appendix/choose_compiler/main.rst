************************************************************************************************************************
æ›´æ”¹æ‰€ç”¨çš„ç¼–è¯‘å™¨
************************************************************************************************************************

========================================================================================================================
æ›´æ”¹ CMake æ‰€ç”¨çš„ç¼–è¯‘å™¨
========================================================================================================================

.. hint::

  æ›´æ¨èæ–¹æ³•æ˜¯é€šè¿‡ :ref:`æˆ‘çš„å­¦ä¹ å»ºè®® <question_board:å­¦ä¹ å¤§çº²_CMake>` å­¦ä¹  CMake + Conan, æŒ‰ç…§ `FeignClaims/cpp_conan_template`_ ä¸­æ‰€è§£é‡Šçš„ç¼–å†™ Conan profiles, æ­¤åå³èƒ½ç”Ÿæˆå¯¹åº”çš„å·¥å…·é“¾.

ç‚¹å‡»çŠ¶æ€æ ä¸Šçš„ :menuselection:`ğŸ› [ä½ å½“å‰æ¿€æ´»çš„ç¼–è¯‘å™¨/é¢„è®¾]` ä»è€Œåˆ‡æ¢.

.. figure:: cmake_choose_compiler.png

  é€‰æ‹©ç¼–è¯‘å™¨

========================================================================================================================
æ·»åŠ ç¼–è¯‘å™¨åˆ° clangd çš„æœç´¢è·¯å¾„
========================================================================================================================

ç‚¹å‡»çª—å£å·¦ä¸‹è§’çš„ :menuselection:`é½¿è½®`, é€‰æ‹© :menuselection:`è®¾ç½®(settings)`, åœ¨å¼¹å‡ºçš„çª—å£å³ä¸Šè§’é€‰æ‹© :menuselection:`æ‰“å¼€æ–‡ä»¶ --> æ‰“å¼€å½“å‰é…ç½®æ–‡ä»¶è®¾ç½®`.

.. note::

  å¦‚æœçª—å£å·¦ä¸‹è§’æ²¡æœ‰é½¿è½®, è¯·å°è¯•é€šè¿‡ :KBD:`Ctrl-Shift-P` æˆ– :KBD:`CommandâŒ˜-Shift-P` æ‰“å¼€å‘½ä»¤èœå•, è¾“å…¥ ``toggle activity bar`` ä»¥æ‰¾åˆ° :menuselection:`æŸ¥çœ‹ï¼šåˆ‡æ¢æ´»åŠ¨æ å¯è§æ€§(View: Toggle Activity Bar Visibility)`, :KBD:`å›è½¦`.

.. figure:: VSCode_æ‰“å¼€è®¾ç½®.gif

  æ‰“å¼€è®¾ç½®

åœ¨æ‰“å¼€çš„ ``settings.json`` æ–‡ä»¶ä¸­æ‰¾åˆ° ``"clangd.arguments"``, åœ¨å…¶ä¸­æ’å…¥ ``"--query-driver=ä½ çš„ç¼–è¯‘å™¨è·¯å¾„1,ä½ çš„ç¼–è¯‘å™¨è·¯å¾„2"``.

.. figure:: query_driver.png

  é…ç½®æœç´¢ç¼–è¯‘å™¨çš„è·¯å¾„

.. warning::

  å¯¹äº M ç³»åˆ—èŠ¯ç‰‡çš„ MacBook, ä½¿ç”¨ homebrew å®‰è£…çš„ gcc æ—¶, clangd å¯èƒ½æç¤º ``__float128 is not supported on this target``.

  ä¸ºæ­¤, æˆ‘åœ¨æ ¹ç›®å½•ä¸‹çš„ ``.clangd`` æ·»åŠ äº†ä¸€è¡Œä»¥æŠ‘åˆ¶è¯¥æŠ¥é”™.

  .. code-block:: yaml
    :emphasize-lines: 2
    :linenos:

    Diagnostics:
      Suppress: ["type_unsupported"]
      # ClangTidy: See file `.clang-tidy`
      UnusedIncludes: Strict
      # MissingIncludes: Strict  # Too many false positive
    Index:
      Background: Build
      StandardLibrary: Yes
    InlayHints:
      Enabled: Yes
      ParameterNames: Yes
      DeducedTypes: Yes
      Designators: Yes
    Hover:
      ShowAKA: Yes